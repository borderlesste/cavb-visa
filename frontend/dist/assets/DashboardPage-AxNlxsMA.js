const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BN6Cjedc.js","assets/index-rdfgdSUU.css"])))=>i.map(i=>d[i]);
import{u as P,r as x,j as e,V as I,D as S,C as k,c as T,d as i,e as Y,f as A,X as O,g as v,h as V,_ as B,P as G,T as K,E as W,i as ce,k as oe,I as U,l as de,m as q,R as Q,n as me,a as xe,A as ue}from"./index-BN6Cjedc.js";import{D as Z,P as ee}from"./PDFExportModal-BWt_yUQB.js";import{D as he}from"./SEO-CqWKqSRE.js";const ge=({onSuccess:s,onCancel:r})=>{const{t,addNotification:a,startNewApplication:u}=P(),[h,n]=x.useState(null),[b,p]=x.useState(!1),[m,w]=x.useState(1),f=g=>{n(g),w(2)},D=async()=>{if(h){p(!0);try{await u(h),s()}catch{a(t("errorCreatingApplication"),"error")}finally{p(!1)}}},N=g=>{const l=[t("passport"),t("birthCertificate"),t("identityDocument"),t("medicalCertificate")];return g===I.VITEM_XI?[...l,t("familyDocuments"),t("sponsorshipLetter"),t("incomeProof")]:g===I.VITEM_III?[...l,t("humanitarianDocuments"),t("emergencyDocuments")]:l};if(m===1)return e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-iom-blue mb-6 text-center",children:t("createNewApplication")}),e.jsx("p",{className:"text-gray-600 text-center mb-8",children:t("selectVisaTypeForNewApplication")}),e.jsxs("div",{className:"space-y-4 max-w-2xl mx-auto",children:[e.jsxs("div",{onClick:()=>f(I.VITEM_XI),className:"p-6 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-iom-blue hover:bg-blue-50 transition-all",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:t(I.VITEM_XI)}),e.jsx("p",{className:"text-gray-600 mb-4",children:t("vitemXIDesc")}),e.jsxs("div",{className:"flex items-center text-sm text-iom-blue",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),t("documentsRequired"),": 7"]})]}),e.jsxs("div",{onClick:()=>f(I.VITEM_III),className:"p-6 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-iom-blue hover:bg-blue-50 transition-all",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:t(I.VITEM_III)}),e.jsx("p",{className:"text-gray-600 mb-4",children:t("vitemIIIDesc")}),e.jsxs("div",{className:"flex items-center text-sm text-iom-blue",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),t("documentsRequired"),": 6"]})]})]}),e.jsx("div",{className:"flex justify-center mt-8",children:e.jsx("button",{onClick:r,className:"px-6 py-3 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:t("cancel")})})]});if(m===2&&h){const g=N(h);return e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-iom-blue mb-2",children:t("applicationSummary")}),e.jsx("p",{className:"text-gray-600",children:t("reviewBeforeSubmitting")})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-iom-blue mb-2",children:t("selectedVisaType")}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{className:"w-5 h-5 text-green-500 mr-2"}),e.jsx("span",{className:"font-medium",children:t(h)})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:t("documentsYouWillNeed")}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:g.map((l,o)=>e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx(S,{className:"w-4 h-4 text-gray-500 mr-3"}),e.jsx("span",{className:"text-sm text-gray-700",children:l})]},o))})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:t("importantNotes")}),e.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[e.jsxs("li",{children:["â€¢ ",t("allDocumentsMustBeValid")]}),e.jsxs("li",{children:["â€¢ ",t("processingTimeIs")," 10-15 ",t("businessDays")]}),e.jsxs("li",{children:["â€¢ ",t("applicationFeeWillBeCharged")]}),e.jsxs("li",{children:["â€¢ ",t("youCanTrackProgress")]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:()=>w(1),className:"px-6 py-3 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:t("back")}),e.jsx("button",{onClick:r,className:"px-6 py-3 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:t("cancel")}),e.jsx("button",{onClick:D,disabled:b,className:"flex-1 px-6 py-3 bg-iom-blue text-white rounded-md hover:bg-iom-blue/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:b?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),t("creating"),"..."]}):t("createApplication")})]})]})}return null},_=({status:s,className:r=""})=>{const t=u=>{switch(u.toUpperCase()){case"NOT_STARTED":return"bg-gray-100 text-gray-800 border-gray-300";case"PENDING_DOCUMENTS":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"IN_REVIEW":return"bg-blue-100 text-blue-800 border-blue-300";case"APPOINTMENT_SCHEDULED":return"bg-purple-100 text-purple-800 border-purple-300";case"APPROVED":return"bg-green-100 text-green-800 border-green-300";case"REJECTED":return"bg-red-100 text-red-800 border-red-300";case"MISSING":return"bg-gray-100 text-gray-800 border-gray-300";case"UPLOADED":return"bg-blue-100 text-blue-800 border-blue-300";case"VERIFIED":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},a=u=>u.toLowerCase().split("_").map(h=>h.charAt(0).toUpperCase()+h.slice(1)).join(" ");return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${t(s)} ${r}`,children:a(s)})},te=({application:s,className:r="",compact:t=!1})=>{const{t:a}=P(),u=()=>{var o;return[{id:"application_started",title:a("applicationStarted"),description:a("applicationStartedDesc"),status:"completed",icon:e.jsx(Y,{className:"w-5 h-5"}),date:s.createdAt,details:[a("visaType")+": "+a(s.visaType),a("applicationId")+": "+s.id]},{id:"documents_upload",title:a("documentsUpload"),description:a("documentsUploadDesc"),status:h(),icon:e.jsx(S,{className:"w-5 h-5"}),details:n()},{id:"review_process",title:a("reviewProcess"),description:a("reviewProcessDesc"),status:b(),icon:e.jsx(T,{className:"w-5 h-5"}),details:p()},{id:"appointment_scheduling",title:a("appointmentScheduling"),description:a("appointmentSchedulingDesc"),status:m(),icon:e.jsx(A,{className:"w-5 h-5"}),date:(o=s.appointment)==null?void 0:o.date,details:w()},{id:"final_decision",title:a("finalDecision"),description:a("finalDecisionDesc"),status:f(),icon:s.status===i.APPROVED?e.jsx(k,{className:"w-5 h-5"}):s.status===i.REJECTED?e.jsx(O,{className:"w-5 h-5"}):e.jsx(T,{className:"w-5 h-5"}),details:D()}]},h=()=>{const l=s.documents,o=l.filter(C=>C.status===v.VERIFIED),d=l.filter(C=>C.status===v.REJECTED),E=l.filter(C=>C.status===v.UPLOADED);return d.length>0?"failed":o.length===l.length?"completed":E.length>0||o.length>0?"current":"upcoming"},n=()=>{const l=s.documents,o=l.filter(j=>j.status===v.VERIFIED).length,d=l.filter(j=>j.status===v.UPLOADED).length,E=l.filter(j=>j.status===v.REJECTED).length,C=[`${o} ${a("verified").toLowerCase()}`,`${d} ${a("uploaded").toLowerCase()}`,`${l.length-o-d} ${a("missing").toLowerCase()}`];return E>0&&C.push(`${E} ${a("rejected").toLowerCase()}`),C},b=()=>s.status===i.REJECTED?"failed":s.status===i.APPROVED||s.status===i.APPOINTMENT_SCHEDULED?"completed":s.status===i.IN_REVIEW?"current":"upcoming",p=()=>{const l=[a("currentStatus")+": "+a(s.status)];return s.status===i.IN_REVIEW&&l.push(a("estimatedReviewTime")+": 5-10 "+a("businessDays")),l},m=()=>s.status===i.REJECTED?"failed":s.appointment?s.appointment.status===V.COMPLETED?"completed":s.appointment.status===V.CANCELLED?"failed":"completed":s.status===i.APPROVED?"current":"upcoming",w=()=>s.appointment?[a("status")+": "+a(s.appointment.status),a("date")+": "+new Date(s.appointment.date).toLocaleDateString(),a("time")+": "+s.appointment.time,a("location")+": "+s.appointment.location]:s.status===i.APPROVED?[a("readyToSchedule")]:[a("pendingApproval")],f=()=>{var l;return s.status===i.APPROVED?"completed":s.status===i.REJECTED?"failed":((l=s.appointment)==null?void 0:l.status)===V.COMPLETED?"current":"upcoming"},D=()=>s.status===i.APPROVED?[a("applicationApproved"),a("visaProcessingComplete")]:s.status===i.REJECTED?[a("applicationRejected"),a("contactSupportForDetails")]:[a("pendingFinalReview")],N=l=>{switch(l){case"completed":return{bg:"bg-green-500",border:"border-green-500",text:"text-green-600",icon:"text-white"};case"current":return{bg:"bg-iom-blue",border:"border-iom-blue",text:"text-iom-blue",icon:"text-white"};case"failed":return{bg:"bg-red-500",border:"border-red-500",text:"text-red-600",icon:"text-white"};default:return{bg:"bg-gray-300",border:"border-gray-300",text:"text-gray-500",icon:"text-gray-400"}}},g=u();return t?e.jsx("div",{className:`${r}`,children:e.jsx("div",{className:"flex items-center justify-between",children:g.map((l,o)=>{const d=N(l.status),E=o===g.length-1;return e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-6 h-6 ${d.bg} rounded-full flex items-center justify-center border-2 ${d.border}`,children:e.jsx("div",{className:`${d.icon} text-xs`,children:l.icon})}),e.jsx("span",{className:`text-xs mt-1 text-center max-w-20 ${d.text}`,children:l.title})]}),!E&&e.jsx("div",{className:"flex-1 h-0.5 bg-gray-200 mx-2"})]},l.id)})})}):e.jsxs("div",{className:`bg-white rounded-xl shadow-md p-6 ${r}`,children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(T,{className:"w-6 h-6 text-iom-blue mr-2"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:a("applicationTimeline")})]}),e.jsx("div",{className:"space-y-8",children:g.map((l,o)=>{const d=N(l.status),E=o===g.length-1;return e.jsxs("div",{className:"relative",children:[!E&&e.jsx("div",{className:"absolute left-4 top-10 w-0.5 h-16 bg-gray-200"}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsxs("div",{className:`relative flex-shrink-0 w-8 h-8 ${d.bg} rounded-full flex items-center justify-center border-2 ${d.border}`,children:[e.jsx("div",{className:d.icon,children:l.icon}),l.status==="current"&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-yellow-400 rounded-full animate-pulse"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:`text-lg font-medium ${d.text}`,children:l.title}),l.date&&e.jsx("span",{className:"text-sm text-gray-500",children:new Date(l.date).toLocaleDateString()})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-3",children:l.description}),l.details&&l.details.length>0&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:l.details.map((C,j)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full mr-2 flex-shrink-0"}),C]},j))})}),l.status==="current"&&l.id==="review_process"&&e.jsxs("div",{className:"mt-3 bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-iom-blue border-t-transparent"}),e.jsx("span",{className:"text-sm font-medium text-iom-blue",children:a("inProgress")})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:e.jsx("div",{className:"bg-iom-blue h-2 rounded-full animate-pulse",style:{width:"60%"}})})]})]})]})]},l.id)})}),e.jsx("div",{className:"mt-8 pt-6 border-t",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:[a("applicationSubmitted"),": ",new Date(s.createdAt).toLocaleDateString()]}),e.jsx("span",{className:`font-medium ${s.status===i.APPROVED?"text-green-600":s.status===i.REJECTED?"text-red-600":"text-iom-blue"}`,children:a(s.status)})]})})]})},be=s=>{switch(s){case i.APPROVED:return e.jsx(k,{className:"w-5 h-5 text-green-600"});case i.IN_REVIEW:return e.jsx(T,{className:"w-5 h-5 text-yellow-600"});case i.REJECTED:return e.jsx(O,{className:"w-5 h-5 text-red-600"});case i.APPOINTMENT_SCHEDULED:return e.jsx(A,{className:"w-5 h-5 text-blue-600"});default:return e.jsx(T,{className:"w-5 h-5 text-gray-600"})}},pe=s=>{switch(s){case i.APPROVED:return"border-l-green-500 bg-green-50";case i.IN_REVIEW:return"border-l-yellow-500 bg-yellow-50";case i.REJECTED:return"border-l-red-500 bg-red-50";case i.APPOINTMENT_SCHEDULED:return"border-l-blue-500 bg-blue-50";default:return"border-l-gray-500 bg-gray-50"}},je=({application:s,isExpanded:r,onToggleExpand:t,onViewFull:a,onDelete:u,onEdit:h})=>{const{t:n}=P(),[b,p]=x.useState(null),[m,w]=x.useState(!1),[f,D]=x.useState(!1),N=d=>{p(d),w(!0)},g=s.documents.filter(d=>d.status===v.VERIFIED).length,l=s.documents.length,o=l>0?g/l*100:0;return e.jsxs("div",{className:`bg-white rounded-lg shadow-md border-l-4 ${pe(s.status)} transition-all duration-200 hover:shadow-lg`,children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[be(s.status),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n(s.visaType)}),e.jsx(_,{status:s.status})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[n("createdAt"),": ",new Date(s.createdAt).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",s.id.slice(-8)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:a,className:"px-3 py-1.5 text-sm font-medium text-iom-blue hover:text-iom-blue/80 transition-colors",children:n("viewDetails")}),e.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors","aria-label":n(r?"collapse":"expand"),children:r?e.jsx(ce,{className:"w-5 h-5"}):e.jsx(oe,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:n("documentsProgress")}),e.jsxs("span",{children:[g,"/",l]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-iom-blue h-2 rounded-full transition-all duration-300",style:{width:`${o}%`}})})]})]}),r&&e.jsx("div",{className:"border-t border-gray-200",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:n("processTimeline")}),e.jsx(te,{application:s,compact:!0})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:n("documents")}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.documents.slice(0,4).map(d=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(S,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:d.type}),e.jsx("p",{className:"text-xs text-gray-500",children:n(d.status)})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[d.status===v.VERIFIED&&e.jsx(k,{className:"w-4 h-4 text-green-600"}),d.filePath&&e.jsx("button",{onClick:()=>N(d),className:"text-xs text-iom-blue hover:text-iom-blue/80",children:n("view")})]})]},d.id))}),s.documents.length>4&&e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:n("andXMore",{count:s.documents.length-4})})]}),s.appointment&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:n("appointment")}),e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(A,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-blue-900",children:[new Date(s.appointment.date).toLocaleDateString(),n("at")," ",s.appointment.time]}),e.jsx("p",{className:"text-sm text-blue-700",children:s.appointment.location}),e.jsxs("p",{className:"text-xs text-blue-600",children:[n("status"),": ",n(s.appointment.status)]})]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>D(!0),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:n("exportPDF")}),e.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-white bg-iom-blue rounded-md hover:bg-iom-blue/90 transition-colors",children:n("viewFullDetails")}),s.status!==i.APPROVED&&s.status!==i.APPOINTMENT_SCHEDULED&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>h(s.id,s.visaType),className:"px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100 transition-colors flex items-center",title:n("editApplication"),children:e.jsx(W,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>u(s.id),className:"px-3 py-2 text-sm font-medium text-red-600 bg-red-50 rounded-md hover:bg-red-100 transition-colors flex items-center",title:n("deleteApplication"),children:e.jsx(K,{className:"w-4 h-4"})})]})]})]})}),m&&b&&e.jsx(Z,{document:b,isOpen:m,onClose:()=>{w(!1),p(null)}}),f&&e.jsx(ee,{isOpen:f,onClose:()=>D(!1),application:s,exportType:"application"})]})},fe=({onCreateNew:s,onViewApplication:r})=>{const{t}=P(),[a,u]=x.useState([]),[h,n]=x.useState(!0),[b,p]=x.useState(new Set),[m,w]=x.useState("all"),[f,D]=x.useState("date"),[N,g]=x.useState(!1),[l,o]=x.useState(null),[d,E]=x.useState(!1),[C,j]=x.useState(!1),[L,J]=x.useState(null),[M,F]=x.useState(null),[$,H]=x.useState(!1);x.useEffect(()=>{X()},[]);const X=async()=>{n(!0);try{const{api:c}=await B(async()=>{const{api:R}=await import("./index-BN6Cjedc.js").then(ie=>ie.y);return{api:R}},__vite__mapDeps([0,1])),y=await c.getUserApplications();u(y)}catch(c){console.error("Error fetching applications:",c)}finally{n(!1)}},se=c=>{const y=new Set(b);y.has(c)?y.delete(c):y.add(c),p(y)},ae=c=>{o(c),g(!0)},le=async()=>{if(l){E(!0);try{const{api:c}=await B(async()=>{const{api:y}=await import("./index-BN6Cjedc.js").then(R=>R.y);return{api:y}},__vite__mapDeps([0,1]));await c.deleteApplication(l),u(y=>y.filter(R=>R.id!==l)),console.log(t("applicationDeleted"))}catch(c){console.error("Error deleting application:",c),alert(c.message||"Failed to delete application")}finally{E(!1),g(!1),o(null)}}},re=(c,y)=>{J({id:c,currentVisaType:y}),F(y),j(!0)},ne=async()=>{if(!(!L||!M)){H(!0);try{const{api:c}=await B(async()=>{const{api:y}=await import("./index-BN6Cjedc.js").then(R=>R.y);return{api:y}},__vite__mapDeps([0,1]));await c.editApplication(L.id,M),await X(),console.log(t("applicationUpdated"))}catch(c){console.error("Error editing application:",c),alert(c.message||"Failed to edit application")}finally{H(!1),j(!1),J(null),F(null)}}},z=a.filter(c=>m==="all"||c.status===m).sort((c,y)=>f==="date"?new Date(y.createdAt).getTime()-new Date(c.createdAt).getTime():c.status.localeCompare(y.status));return h?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-iom-blue"}),e.jsx("span",{className:"ml-4 text-gray-600",children:t("loadingApplications")})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t("myApplications")}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-gray-600",children:t("applicationsCount",{count:a.length,defaultValue_one:"{{count}} application",defaultValue_other:"{{count}} applications"})}),e.jsx("p",{className:"text-xs text-blue-600",children:t("applicationsRemaining",{count:Math.max(0,5-a.length),used:a.length,total:5})})]})]}),e.jsxs("button",{onClick:s,className:"mt-4 sm:mt-0 flex items-center px-4 py-2 bg-brazil-green text-white rounded-md hover:bg-brazil-green/90 transition-colors",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),t("createNewApplication")]})]}),a.length>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("label",{htmlFor:"status-filter",className:"text-sm font-medium text-gray-700",children:[t("filterByStatus"),":"]}),e.jsxs("select",{id:"status-filter",value:m,onChange:c=>w(c.target.value),className:"text-sm border-gray-300 rounded-md focus:ring-iom-blue focus:border-iom-blue",children:[e.jsx("option",{value:"all",children:t("allStatuses")}),e.jsx("option",{value:i.PENDING_DOCUMENTS,children:t(i.PENDING_DOCUMENTS)}),e.jsx("option",{value:i.IN_REVIEW,children:t(i.IN_REVIEW)}),e.jsx("option",{value:i.APPOINTMENT_SCHEDULED,children:t(i.APPOINTMENT_SCHEDULED)}),e.jsx("option",{value:i.APPROVED,children:t(i.APPROVED)}),e.jsx("option",{value:i.REJECTED,children:t(i.REJECTED)})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("label",{htmlFor:"sort-by",className:"text-sm font-medium text-gray-700",children:[t("sortBy"),":"]}),e.jsxs("select",{id:"sort-by",value:f,onChange:c=>D(c.target.value),className:"text-sm border-gray-300 rounded-md focus:ring-iom-blue focus:border-iom-blue",children:[e.jsx("option",{value:"date",children:t("dateCreated")}),e.jsx("option",{value:"status",children:t("status")})]})]})]}),z.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm border-2 border-dashed border-gray-300",children:[e.jsx(S,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:a.length===0?t("noApplicationsYet"):t("noApplicationsMatch")}),e.jsx("p",{className:"text-gray-600 mb-6",children:a.length===0?t("startFirstApplication"):t("adjustFilters")}),a.length===0&&e.jsxs("button",{onClick:s,className:"inline-flex items-center px-4 py-2 bg-brazil-green text-white rounded-md hover:bg-brazil-green/90 transition-colors",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),t("createNewApplication")]})]}):e.jsx("div",{className:"space-y-4",children:z.map(c=>e.jsx(je,{application:c,isExpanded:b.has(c.id),onToggleExpand:()=>se(c.id),onViewFull:()=>r(c),onDelete:ae,onEdit:re},c.id))}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(O,{className:"w-8 h-8 text-red-500 mr-3"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t("deleteApplication")})]}),e.jsx("p",{className:"text-gray-600 mb-2",children:t("confirmDelete")}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:t("deleteWarning")}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{g(!1),o(null)},disabled:d,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors disabled:opacity-50",children:t("cancel")}),e.jsxs("button",{onClick:le,disabled:d,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center",children:[d?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):e.jsx(K,{className:"w-4 h-4 mr-2"}),d?"Deleting...":t("confirm")]})]})]})}),C&&L&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(W,{className:"w-8 h-8 text-blue-500 mr-3"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t("editVisaType")})]}),e.jsx("p",{className:"text-gray-600 mb-2",children:t("confirmEdit")}),e.jsx("p",{className:"text-sm text-yellow-600 mb-4",children:t("editWarning")}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("selectNewVisaType")}),e.jsxs("select",{value:M||"",onChange:c=>F(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-iom-blue focus:border-transparent",children:[e.jsx("option",{value:I.VITEM_XI,children:t(I.VITEM_XI)}),e.jsx("option",{value:I.VITEM_III,children:t(I.VITEM_III)})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{j(!1),J(null),F(null)},disabled:$,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors disabled:opacity-50",children:t("cancel")}),e.jsxs("button",{onClick:ne,disabled:$||M===L.currentVisaType,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center",children:[$?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):e.jsx(W,{className:"w-4 h-4 mr-2"}),$?"Updating...":t("confirm")]})]})]})})]})},Ne=({application:s})=>{const{t:r,user:t,scheduleAppointment:a,isLoading:u}=P(),[h,n]=x.useState(""),[b,p]=x.useState(""),[m,w]=x.useState((t==null?void 0:t.dateOfBirth)||""),[f,D]=x.useState((t==null?void 0:t.passportNumber)||""),[N,g]=x.useState((t==null?void 0:t.nationality)||""),l=s.documents.find(j=>j.type==="Identity Document"),o=(l==null?void 0:l.status)===v.VERIFIED,d=m&&f&&N,E=h&&b&&d&&o,C=()=>{E&&a(h,b,{dateOfBirth:m,passportNumber:f,nationality:N})};return e.jsxs("div",{className:"mt-6 border-t pt-6",children:[e.jsxs("h4",{className:"font-semibold text-lg mb-4 flex items-center",children:[e.jsx(A,{className:"w-5 h-5 mr-2"}),r("scheduleAppointment")]}),e.jsxs("div",{className:"mb-6 bg-blue-50 p-4 rounded-lg border-l-4 border-blue-400",children:[e.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:r("appointmentRequirements")}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:`flex items-center ${o?"text-green-700":"text-red-700"}`,children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),r("identityDocumentVerified")," ",o?"âœ“":"âœ—"]}),e.jsxs("li",{className:`flex items-center ${d?"text-green-700":"text-red-700"}`,children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),r("personalInfoComplete")," ",d?"âœ“":"âœ—"]})]})]}),!o&&e.jsx("div",{className:"mb-4 bg-red-50 p-4 rounded-lg border-l-4 border-red-400",children:e.jsxs("p",{className:"text-red-800 text-sm",children:[e.jsx(U,{className:"w-4 h-4 inline mr-1"}),r("identityDocumentRequired")]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r("fullName")}),e.jsx("input",{type:"text",value:(t==null?void 0:t.fullName)||"",disabled:!0,className:"w-full p-2 border rounded-md bg-gray-100 text-gray-600"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r("dateOfBirth")," *"]}),e.jsx("input",{type:"date",value:m,onChange:j=>w(j.target.value),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r("passportNumber")," *"]}),e.jsx("input",{type:"text",value:f,onChange:j=>D(j.target.value.toUpperCase()),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"AB1234567",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r("nationality")," *"]}),e.jsxs("select",{value:N,onChange:j=>g(j.target.value),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:r("selectNationality")}),e.jsx("option",{value:"Haitian",children:"Haitian"}),e.jsx("option",{value:"American",children:"American"}),e.jsx("option",{value:"Canadian",children:"Canadian"}),e.jsx("option",{value:"French",children:"French"}),e.jsx("option",{value:"Dominican",children:"Dominican"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(A,{className:"w-4 h-4 mr-1"}),r("appointmentDate")," *"]}),e.jsx("input",{type:"date",value:h,onChange:j=>n(j.target.value),min:new Date().toISOString().split("T")[0],className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center",children:[e.jsx(T,{className:"w-4 h-4 mr-1"}),r("appointmentTime")," *"]}),e.jsxs("select",{value:b,onChange:j=>p(j.target.value),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:r("selectTime")}),e.jsx("option",{value:"09:00",children:"09:00 AM"}),e.jsx("option",{value:"10:00",children:"10:00 AM"}),e.jsx("option",{value:"11:00",children:"11:00 AM"}),e.jsx("option",{value:"14:00",children:"02:00 PM"}),e.jsx("option",{value:"15:00",children:"03:00 PM"}),e.jsx("option",{value:"16:00",children:"04:00 PM"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:C,disabled:u||!E,className:`w-full font-bold py-2 rounded-lg transition-colors ${E&&!u?"bg-brazil-green text-white hover:bg-brazil-green/90":"bg-gray-400 text-gray-600 cursor-not-allowed"}`,children:r(u?"scheduling":"bookAppointment")})})]}),e.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-400",children:e.jsxs("p",{className:"text-yellow-800 text-sm",children:[e.jsx(U,{className:"w-4 h-4 inline mr-1"}),r("appointmentBookingNote")]})})]})},ye=({doc:s,onViewDocument:r})=>{const{t,uploadDocument:a,isLoading:u}=P(),h=Q.useRef(null),n=m=>{m.target.files&&m.target.files[0]&&a(s.id,m.target.files[0])},b=()=>{s.filePath&&r(s)},p=()=>{switch(s.status){case v.VERIFIED:return e.jsx(k,{className:"w-4 h-4 text-green-600"});case v.UPLOADED:return e.jsx(T,{className:"w-4 h-4 text-blue-600"});case v.REJECTED:return e.jsx(O,{className:"w-4 h-4 text-red-600"});default:return e.jsx(S,{className:"w-4 h-4 text-gray-400"})}};return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-6 text-gray-700 font-medium",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[p(),e.jsxs("div",{children:[e.jsx("span",{children:s.type}),s.status===v.REJECTED&&s.rejectionReason&&e.jsxs("div",{className:"mt-2 flex items-start text-xs text-red-600",children:[e.jsx(U,{className:"w-4 h-4 mr-1.5 flex-shrink-0 mt-0.5"}),e.jsxs("span",{className:"flex-1",children:[e.jsxs("b",{children:[t("rejectionNote"),":"]})," ",s.rejectionReason]})]})]})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx(_,{status:s.status})}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:s.fileName||"â€”"}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-500",children:s.filePath?new Date().toLocaleDateString():"â€”"}),e.jsx("td",{className:"py-4 px-6",children:s.status===v.MISSING||s.status===v.REJECTED?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"file",ref:h,onChange:n,className:"hidden","aria-label":"Upload document",title:"Upload document"}),e.jsxs("button",{onClick:()=>{var m;return(m=h.current)==null?void 0:m.click()},disabled:u,className:"bg-iom-blue text-white px-3 py-1.5 rounded-md text-sm font-medium hover:bg-iom-blue/90 flex items-center disabled:bg-gray-400 transition-colors",children:[e.jsx(me,{className:"w-4 h-4 mr-1"}),t("upload")]})]}):e.jsxs("button",{onClick:b,disabled:!s.filePath,className:"bg-gray-100 text-gray-700 px-3 py-1.5 rounded-md text-sm font-medium hover:bg-gray-200 flex items-center disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[e.jsx(S,{className:"w-4 h-4 mr-1"}),t("view")]})})]})},we=({application:s})=>{const{t:r}=P();if(s.appointment){const m=s.appointment.status===V.CONFIRMED?"green":"blue",w=s.appointment.status===V.CONFIRMED?"âœ“":"ðŸ“…";return e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(A,{className:"w-6 h-6 text-iom-blue mr-2"}),r("appointment")]}),e.jsxs("div",{className:`flex items-center justify-between p-4 bg-${m}-50 rounded-lg`,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-12 h-12 bg-${m}-100 rounded-full flex items-center justify-center`,children:e.jsx(A,{className:`w-6 h-6 text-${m}-600`})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-lg text-gray-900",children:[w," ",new Date(s.appointment.date).toLocaleDateString(),r("at")," ",s.appointment.time]}),e.jsx("p",{className:"text-gray-600",children:s.appointment.location}),e.jsx("div",{className:"flex items-center mt-2",children:e.jsx(_,{status:s.appointment.status})})]})]}),s.appointment.confirmationLetterPath&&e.jsxs("button",{onClick:()=>window.open(s.appointment.confirmationLetterPath,"_blank"),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),r("downloadLetter")]})]})]})}if(s.status===i.APPROVED)return e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(A,{className:"w-6 h-6 text-iom-blue mr-2"}),r("scheduleAppointment")]}),e.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(U,{className:"w-6 h-6 text-blue-600"}),e.jsx("p",{className:"text-blue-800 font-medium",children:r("appointmentPromptApproved")})]})}),e.jsx(Ne,{application:s})]});const a=(()=>{switch(s.status){case i.PENDING_DOCUMENTS:return r("noAppointment");case i.IN_REVIEW:return r("appointmentPromptReview");case i.REJECTED:return r("applicationRejectedMessage");default:return r("noAppointment")}})(),u=s.status===i.REJECTED,h=u?O:T,n=u?"text-red-600":"text-yellow-600",b=u?"bg-red-50":"bg-yellow-50",p=u?"border-red-200":"border-yellow-200";return e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(A,{className:"w-6 h-6 text-iom-blue mr-2"}),r("appointment")]}),e.jsxs("div",{className:`flex items-center space-x-4 p-4 ${b} border ${p} rounded-lg`,children:[e.jsx(h,{className:`w-8 h-8 ${n}`}),e.jsx("p",{className:`font-medium ${n.replace("text-","text-")} text-gray-800`,children:a})]})]})},ve=({application:s,onBack:r})=>{const{t}=P(),[a,u]=x.useState(null),[h,n]=x.useState(!1),[b,p]=x.useState(!1),[m,w]=x.useState("application"),f=o=>{u(o),n(!0)},D=o=>{w(o),p(!0)},N=s.documents.filter(o=>o.status===v.VERIFIED).length,g=s.documents.length,l=g>0?N/g*100:0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4 sm:mb-0",children:[e.jsx("button",{onClick:r,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors","aria-label":t("goBack"),children:e.jsx(de,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center space-x-3",children:[e.jsx("span",{children:t(s.visaType)}),e.jsx(_,{status:s.status})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[t("applicationId"),": ",s.id]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[t("createdAt"),": ",new Date(s.createdAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>D("application"),className:"flex items-center px-3 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",title:t("exportApplicationReport"),children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),t("exportReport")]}),e.jsxs("button",{onClick:()=>D("document-checklist"),className:"flex items-center px-3 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",title:t("exportDocumentChecklist"),children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),t("checklist")]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:t("overallProgress")}),e.jsxs("span",{children:[Math.round(l),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-iom-blue h-3 rounded-full transition-all duration-500",style:{width:`${l}%`}})})]})]}),e.jsx(te,{application:s}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:t("applicationDetails")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:t("visaType")}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:t(s.visaType)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:t("status")}),e.jsx("div",{className:"mt-2",children:e.jsx(_,{status:s.status})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:t("submitted")}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:new Date(s.createdAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:t("documentsCompleted")}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:[N," / ",g]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:t("applicationId")}),e.jsx("p",{className:"text-lg font-mono text-gray-900 mt-1",children:s.id.slice(-12)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx(S,{className:"w-6 h-6 text-iom-blue mr-2"}),t("documents")," (",N,"/",g,")"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[e.jsx("th",{className:"py-3 px-6 text-left font-medium text-gray-600",children:t("documentColumn")}),e.jsx("th",{className:"py-3 px-6 text-left font-medium text-gray-600",children:t("status")}),e.jsx("th",{className:"py-3 px-6 text-left font-medium text-gray-600",children:t("fileNameColumn")}),e.jsx("th",{className:"py-3 px-6 text-left font-medium text-gray-600",children:t("uploadDateColumn")}),e.jsx("th",{className:"py-3 px-6 text-left font-medium text-gray-600",children:t("actions")})]})}),e.jsx("tbody",{children:s.documents.map(o=>e.jsx(ye,{doc:o,onViewDocument:f},o.id))})]})})]}),e.jsx(we,{application:s}),h&&a&&e.jsx(Z,{document:a,isOpen:h,onClose:()=>{n(!1),u(null)}}),b&&e.jsx(ee,{isOpen:b,onClose:()=>p(!1),application:s,exportType:m})]})},Ie=()=>{const{t:s,user:r,isLoading:t,isAuthenticated:a}=P(),u=xe(),[h,n]=x.useState("list"),[b,p]=x.useState(null);if(Q.useEffect(()=>{!t&&!a&&u(ue.AUTH)},[t,a,u]),t)return e.jsxs("div",{className:"flex justify-center items-center h-screen",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-iom-blue"}),e.jsx("span",{className:"ml-4 text-gray-600",children:s("loading")})]});if(!r)return null;const m=()=>{n("create"),p(null)},w=l=>{p(l),n("details")},f=()=>{n("list"),p(null)},D=()=>{n("list"),p(null)},N=()=>{n("list"),p(null)},g=()=>{switch(h){case"create":return e.jsx(ge,{onSuccess:D,onCancel:N});case"details":return b?e.jsx(ve,{application:b,onBack:f}):(n("list"),null);case"list":default:return e.jsx(fe,{onCreateNew:m,onViewApplication:w})}};return e.jsxs(e.Fragment,{children:[e.jsx(he,{}),e.jsx("div",{className:"bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[h==="list"&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-2",children:[s("welcome"),", ",r.fullName,"!"]}),e.jsx("p",{className:"text-gray-600",children:s("dashboardSubtitle")})]}),e.jsx("div",{className:"w-full",children:g()})]})})]})};export{Ie as default};
