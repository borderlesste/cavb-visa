import{u as A,r as m,j as e,b as E,a as O,U as R,A as S}from"./index-BN6Cjedc.js";import{A as I}from"./SEO-CqWKqSRE.js";const k=({onSuccess:n,onBack:g})=>{var f;const{isLoading:h,addNotification:u}=A(),N={OUEST:[{value:"PORT_AU_PRINCE",label:"Port-au-Prince"},{value:"CROIX_DES_BOUQUETS",label:"Croix-des-Bouquets"},{value:"PETION_VILLE",label:"PÃ©tion-Ville"}],NORD:[{value:"CAP_HAITIEN",label:"Cap-HaÃ¯tien"},{value:"FORT_LIBERTE",label:"Fort-LibertÃ©"}],SUD:[{value:"LES_CAYES",label:"Les Cayes"},{value:"AQUIN",label:"Aquin"}],ARTIBONITE:[{value:"GONAIVES",label:"GonaÃ¯ves"},{value:"SAINT_MARC",label:"Saint-Marc"}],SUD_EST:[{value:"JACMEL",label:"Jacmel"}],NORD_OUEST:[{value:"PORT_DE_PAIX",label:"Port-de-Paix"}],CENTRE:[{value:"HINCHE",label:"Hinche"}],GRAND_ANSE:[{value:"JEREMIE",label:"JÃ©rÃ©mie"}],NIPPES:[{value:"MIRAGOANE",label:"MiragoÃ¢ne"},{value:"ANSE_A_VEAU",label:"Anse-Ã -Veau"}],NORD_EST:[{value:"FORT_LIBERTE",label:"Fort-LibertÃ©"}]},[s,p]=m.useState({firstName:"",lastName:"",otherNames:"",dateOfBirth:"",countryCode:"+509",phoneNumber:"",email:"",password:"",nationalId:"",sex:"",nationality:"",address:"",department:"",arrondissement:""}),r=o=>{const{name:d,value:x}=o.target,t=["firstName","lastName","otherNames","nationalId","address"].includes(d)?x.toUpperCase():x;p(d==="department"?l=>({...l,[d]:t,arrondissement:""}):l=>({...l,[d]:t}))},a=async o=>{if(o.preventDefault(),h)return;if(["firstName","lastName","dateOfBirth","phoneNumber","email","password","nationalId","sex","nationality","address","department","arrondissement"].filter(l=>!s[l]).length>0){u("Please fill all required fields","error");return}const t={fullName:`${s.firstName} ${s.lastName}${s.otherNames?" "+s.otherNames:""}`,email:s.email,password:s.password,additionalData:{firstName:s.firstName,lastName:s.lastName,otherNames:s.otherNames||void 0,dateOfBirth:s.dateOfBirth,phone:`${s.countryCode}${s.phoneNumber}`,nationalId:s.nationalId,sex:s.sex,nationality:s.nationality,address:s.address,department:s.department,arrondissement:s.arrondissement}};console.log("Sending registration data:",JSON.stringify(t,null,2));try{const l=await fetch(`${E.BASE_URL}${E.AUTH}/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),i=await l.json();console.log("Response status:",l.status),console.log("Response data:",i),l.ok?(u(i.message||"Registration successful! Please check your email to verify your account.","success"),n()):(console.error("Registration failed:",i),u(i.message||"Registration failed","error"))}catch{u("Network error occurred","error")}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center py-8 px-4 sm:px-6 lg:px-8 relative detailed-register-bg",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40"}),e.jsxs("div",{className:"absolute top-6 left-6 text-white z-20",children:[e.jsx("div",{className:"text-2xl font-bold",children:"âš¬OIM"}),e.jsx("div",{className:"text-xs -mt-1",children:"ORGANIZACIÃ“N INTERNACIONAL"})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto relative z-10",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-green-800 mb-2",children:"IOM VIA"}),e.jsx("p",{className:"text-gray-600",children:"Sign up"})]}),e.jsxs("form",{onSubmit:a,className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name*"}),e.jsx("input",{type:"text",id:"firstName",name:"firstName",value:s.firstName,onChange:r,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name*"}),e.jsx("input",{type:"text",id:"lastName",name:"lastName",value:s.lastName,onChange:r,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"otherNames",className:"block text-sm font-medium text-gray-700 mb-1",children:"Other Names"}),e.jsx("input",{type:"text",id:"otherNames",name:"otherNames",value:s.otherNames,onChange:r,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dateOfBirth",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth*"}),e.jsx("input",{type:"date",id:"dateOfBirth",name:"dateOfBirth",value:s.dateOfBirth,onChange:r,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number*"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{name:"countryCode",title:"Country Code",value:s.countryCode,onChange:r,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"+509",children:"ðŸ‡­ðŸ‡¹ +509"}),e.jsx("option",{value:"+1",children:"ðŸ‡ºðŸ‡¸ +1"}),e.jsx("option",{value:"+55",children:"ðŸ‡§ðŸ‡· +55"}),e.jsx("option",{value:"+52",children:"ðŸ‡²ðŸ‡½ +52"}),e.jsx("option",{value:"+57",children:"ðŸ‡¨ðŸ‡´ +57"}),e.jsx("option",{value:"+51",children:"ðŸ‡µðŸ‡ª +51"}),e.jsx("option",{value:"+56",children:"ðŸ‡¨ðŸ‡± +56"}),e.jsx("option",{value:"+54",children:"ðŸ‡¦ðŸ‡· +54"})]}),e.jsx("input",{type:"tel",name:"phoneNumber",value:s.phoneNumber,onChange:r,required:!0,placeholder:"Enter your phone number",title:"Phone Number",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address*"}),e.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:r,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password*"}),e.jsx("input",{type:"password",id:"password",name:"password",value:s.password,onChange:r,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nationalId",className:"block text-sm font-medium text-gray-700 mb-1",children:"National ID Number*"}),e.jsx("input",{type:"text",id:"nationalId",name:"nationalId",value:s.nationalId,onChange:r,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sex",className:"block text-sm font-medium text-gray-700 mb-1",children:"Sex*"}),e.jsxs("select",{id:"sex",name:"sex",title:"Sex",value:s.sex,onChange:r,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nationality",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nationality*"}),e.jsxs("select",{id:"nationality",name:"nationality",title:"Nationality",value:s.nationality,onChange:r,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"haitian",children:"Haitian"}),e.jsx("option",{value:"brazilian",children:"Brazilian"}),e.jsx("option",{value:"venezuelan",children:"Venezuelan"}),e.jsx("option",{value:"colombian",children:"Colombian"}),e.jsx("option",{value:"peruvian",children:"Peruvian"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Address*"}),e.jsx("input",{type:"text",id:"address",name:"address",value:s.address,onChange:r,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 mb-1",children:"Department*"}),e.jsxs("select",{id:"department",name:"department",title:"Department",value:s.department,onChange:r,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"",children:"Select..."}),e.jsx("option",{value:"ARTIBONITE",children:"Artibonite"}),e.jsx("option",{value:"CENTRE",children:"Centre"}),e.jsx("option",{value:"GRAND_ANSE",children:"Grand'Anse"}),e.jsx("option",{value:"NIPPES",children:"Nippes"}),e.jsx("option",{value:"NORD",children:"Nord"}),e.jsx("option",{value:"NORD_EST",children:"Nord-Est"}),e.jsx("option",{value:"NORD_OUEST",children:"Nord-Ouest"}),e.jsx("option",{value:"OUEST",children:"Ouest"}),e.jsx("option",{value:"SUD_EST",children:"Sud-Est"}),e.jsx("option",{value:"SUD",children:"Sud"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"arrondissement",className:"block text-sm font-medium text-gray-700 mb-1",children:"Arrondissement*"}),e.jsxs("select",{id:"arrondissement",name:"arrondissement",title:"Arrondissement",value:s.arrondissement,onChange:r,required:!0,disabled:!s.department,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 disabled:bg-gray-100",children:[e.jsx("option",{value:"",children:s.department?"Select...":"First select a department"}),s.department&&((f=N[s.department])==null?void 0:f.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value)))]})]})]}),e.jsxs("div",{className:"flex gap-4 pt-6",children:[e.jsx("button",{type:"button",onClick:g,className:"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Back"}),e.jsx("button",{type:"submit",disabled:h,className:"flex-1 py-3 px-4 btn-green rounded-lg font-medium focus:outline-none focus:ring-2 focus:ring-green-500 disabled:bg-gray-400",children:h?"Registering...":"Register"})]})]})]})]})},T=()=>{const[n,g]=m.useState(!0),[h,u]=m.useState(!1),[N,s]=m.useState(!1),[p,r]=m.useState(""),{t:a,login:f,register:o,isLoading:d,addNotification:x}=A(),b=O(),[t,l]=m.useState(""),[i,y]=m.useState(""),[v,w]=m.useState(""),C=async c=>{if(c.preventDefault(),!d)if(n){if(!t||!i){x(a("fillAllFields"),"error");return}const j=await f(t,i);j&&(j.role===R.ADMIN?b(S.ADMIN):b(S.DASHBOARD))}else{if(!t||!i||!v){x(a("fillAllFields"),"error");return}await o(v,t,i)&&(x(a("registrationSuccess"),"success"),g(!0),w(""),l(""),y(""))}};return N?e.jsxs("div",{className:"min-h-[calc(100vh-160px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 relative auth-bg",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40"}),e.jsx("div",{className:"max-w-md w-full space-y-8 bg-white/95 backdrop-blur-sm p-10 rounded-xl shadow-2xl animate-fade-in relative z-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-16 w-16 rounded-full bg-green-100 flex items-center justify-center mb-6",children:e.jsx("svg",{className:"h-8 w-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsx("h2",{className:"text-2xl font-bold text-green-800 mb-4",children:"Â¡Registro Exitoso!"}),e.jsxs("div",{className:"text-left space-y-4",children:[e.jsx("p",{className:"text-gray-700",children:"Tu cuenta ha sido creada exitosamente. Para completar el proceso de registro:"}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"VerificaciÃ³n de Email Requerida"}),e.jsx("div",{className:"mt-2 text-sm text-blue-700",children:e.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[e.jsxs("li",{children:["Ve a tu bandeja de entrada de ",e.jsx("strong",{children:"Gmail"})]}),e.jsxs("li",{children:["Busca el email de ",e.jsx("strong",{children:'"IOM Visa Application System"'})]}),e.jsxs("li",{children:["Haz clic en el botÃ³n ",e.jsx("strong",{children:'"âœ… Verify Email Address"'})]}),e.jsx("li",{children:"Una vez verificado, podrÃ¡s iniciar sesiÃ³n"})]})})]})]})}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("span",{className:"font-medium",children:"Email enviado a:"}),e.jsx("br",{}),p]}),e.jsx("p",{className:"text-xs text-yellow-700 mt-2",children:"âš ï¸ Si no encuentras el email, revisa tu carpeta de spam o correo no deseado."})]})]}),e.jsx("div",{className:"space-y-3 mt-6",children:e.jsx("button",{onClick:()=>{s(!1),g(!0),r("")},className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Entendido, ir al Login"})})]})})]}):h?e.jsx(k,{onSuccess:c=>{u(!1),r(c||""),s(!0)},onBack:()=>u(!1)}):e.jsxs(e.Fragment,{children:[e.jsx(I,{}),e.jsxs("div",{className:"min-h-[calc(100vh-160px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 relative auth-bg",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40"}),e.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white/95 backdrop-blur-sm p-10 rounded-xl shadow-2xl animate-fade-in relative z-10",children:[e.jsx("div",{children:e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-green-800",children:a(n?"login":"register")})}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:C,children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[!n&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"full-name",className:"sr-only",children:a("fullName")}),e.jsx("input",{id:"full-name",name:"fullName",type:"text",autoComplete:"name",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:a("fullName"),value:v,onChange:c=>w(c.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email-address",className:"sr-only",children:a("email")}),e.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:`appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 ${n?"rounded-t-md":""} focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm`,placeholder:a("email"),value:t,onChange:c=>l(c.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:a("password")}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:a("password"),value:i,onChange:c=>y(c.target.value)})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:d,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white btn-green focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:bg-gray-400",children:a(d?"loading":n?"login":"register")})})]}),e.jsx("div",{className:"text-sm text-center",children:e.jsxs("button",{type:"button",onClick:()=>{n?u(!0):g(!0)},className:"font-medium text-green-600 hover:text-green-500",children:[a(n?"registerPrompt":"loginPrompt")," ",a(n?"register":"login")]})})]})]})]})};export{T as default};
