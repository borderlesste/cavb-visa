import{u as A,a as D,r as d,A as U,j as e,D as q,C as O,e as T,I as y}from"./index-BN6Cjedc.js";const F=()=>{const{t:s,user:l,isAuthenticated:f,isLoading:b,addNotification:i}=A(),p=D(),[c,h]=d.useState("personal"),[a,o]=d.useState({fullName:"",email:"",dateOfBirth:"",passportNumber:"",nationality:"",phone:"",address:""}),[n,m]=d.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[u,x]=d.useState(!1),[B,v]=d.useState(null),[g,P]=d.useState("");d.useEffect(()=>{!b&&!f&&p(U.AUTH),l&&o({fullName:l.fullName||"",email:l.email||"",dateOfBirth:l.dateOfBirth||"",passportNumber:l.passportNumber||"",nationality:l.nationality||"",phone:"",address:""})},[b,f,l,p]);const C=async r=>{r.preventDefault(),x(!0);try{await new Promise(t=>setTimeout(t,1e3)),i(s("profileUpdatedSuccessfully"),"success")}catch(t){i(t.message||s("profileUpdateFailed"),"error")}finally{x(!1)}},S=async r=>{if(r.preventDefault(),n.newPassword!==n.confirmPassword){i(s("passwordsDoNotMatch"),"error");return}if(n.newPassword.length<6){i(s("passwordTooShort"),"error");return}x(!0);try{await new Promise(t=>setTimeout(t,1e3)),i(s("passwordChangedSuccessfully"),"success"),m({currentPassword:"",newPassword:"",confirmPassword:""})}catch(t){i(t.message||s("passwordChangeFailed"),"error")}finally{x(!1)}},I=r=>{var j;const t=(j=r.target.files)==null?void 0:j[0];if(t){if(t.size>5*1024*1024){i(s("imageTooLarge"),"error");return}v(t);const w=new FileReader;w.onload=k=>{var N;P((N=k.target)==null?void 0:N.result)},w.readAsDataURL(t)}};return b?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-iom-blue mx-auto"}),e.jsx("p",{className:"mt-4",children:s("loading")})]})}):l?e.jsx("div",{className:"bg-gray-100 min-h-screen p-4 sm:p-8",children:e.jsxs("div",{className:"container mx-auto max-w-4xl",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 sm:p-8 mb-8",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-iom-blue flex items-center justify-center text-white text-2xl font-bold overflow-hidden",children:g?e.jsx("img",{src:g,alt:"Profile",className:"w-full h-full object-cover"}):l.fullName.charAt(0).toUpperCase()}),e.jsxs("label",{className:"absolute bottom-0 right-0 bg-brazil-green text-white p-1 rounded-full cursor-pointer hover:bg-brazil-green/90",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("input",{type:"file",accept:"image/*",onChange:I,className:"hidden"})]})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:l.fullName}),e.jsx("p",{className:"text-gray-600",children:l.email}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(O,{className:"w-4 h-4 text-green-500 mr-1"}),e.jsx("span",{className:"text-sm text-green-600",children:s("emailVerified")})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md mb-8",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex",children:[e.jsxs("button",{onClick:()=>h("personal"),className:`py-4 px-6 font-medium text-sm border-b-2 ${c==="personal"?"border-iom-blue text-iom-blue":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(T,{className:"w-4 h-4 inline mr-2"}),s("personalInformation")]}),e.jsxs("button",{onClick:()=>h("security"),className:`py-4 px-6 font-medium text-sm border-b-2 ${c==="security"?"border-iom-blue text-iom-blue":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(y,{className:"w-4 h-4 inline mr-2"}),s("security")]})]})}),e.jsxs("div",{className:"p-6 sm:p-8",children:[c==="personal"&&e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s("fullName")," *"]}),e.jsx("input",{type:"text",required:!0,value:a.fullName,onChange:r=>o({...a,fullName:r.target.value}),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-iom-blue focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s("email")," *"]}),e.jsx("input",{type:"email",required:!0,value:a.email,onChange:r=>o({...a,email:r.target.value}),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-iom-blue focus:border-transparent",disabled:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s("dateOfBirth")," *"]}),e.jsx("input",{type:"date",required:!0,value:a.dateOfBirth,onChange:r=>o({...a,dateOfBirth:r.target.value}),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-iom-blue focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s("passportNumber")," *"]}),e.jsx("input",{type:"text",required:!0,value:a.passportNumber,onChange:r=>o({...a,passportNumber:r.target.value.toUpperCase()}),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-iom-blue focus:border-transparent",placeholder:"AB1234567"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s("nationality")," *"]}),e.jsxs("select",{required:!0,value:a.nationality,onChange:r=>o({...a,nationality:r.target.value}),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-iom-blue focus:border-transparent",children:[e.jsx("option",{value:"",children:s("selectNationality")}),e.jsx("option",{value:"Haitian",children:"Haitian"}),e.jsx("option",{value:"American",children:"American"}),e.jsx("option",{value:"Canadian",children:"Canadian"}),e.jsx("option",{value:"French",children:"French"}),e.jsx("option",{value:"Dominican",children:"Dominican"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s("phoneNumber")}),e.jsx("input",{type:"tel",value:a.phone,onChange:r=>o({...a,phone:r.target.value}),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-iom-blue focus:border-transparent",placeholder:"+509 1234-5678"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s("address")}),e.jsx("textarea",{value:a.address,onChange:r=>o({...a,address:r.target.value}),rows:3,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-iom-blue focus:border-transparent",placeholder:s("enterYourAddress")})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:u,className:"bg-iom-blue text-white px-6 py-3 rounded-md font-medium hover:bg-iom-blue/90 disabled:opacity-50 disabled:cursor-not-allowed",children:s(u?"updating":"updateProfile")})})]}),c==="security"&&e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4 mb-6",children:e.jsxs("div",{className:"flex",children:[e.jsx(y,{className:"w-5 h-5 text-yellow-600 mt-0.5 mr-2"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:s("passwordSecurityNote")}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:s("passwordRequirements")})]})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s("currentPassword")," *"]}),e.jsx("input",{type:"password",required:!0,value:n.currentPassword,onChange:r=>m({...n,currentPassword:r.target.value}),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-iom-blue focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s("newPassword")," *"]}),e.jsx("input",{type:"password",required:!0,value:n.newPassword,onChange:r=>m({...n,newPassword:r.target.value}),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-iom-blue focus:border-transparent",minLength:6})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s("confirmNewPassword")," *"]}),e.jsx("input",{type:"password",required:!0,value:n.confirmPassword,onChange:r=>m({...n,confirmPassword:r.target.value}),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-iom-blue focus:border-transparent",minLength:6})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:u,className:"bg-brazil-green text-white px-6 py-3 rounded-md font-medium hover:bg-brazil-green/90 disabled:opacity-50 disabled:cursor-not-allowed",children:s(u?"updating":"changePassword")})})]})]})]})]})}):null};export{F as default};
