import{v as k,a as E,u as L,r as t,j as e,b as j,A as p}from"./index-BN6Cjedc.js";const T=()=>{const{token:l}=k(),d=E(),{t:r,addNotification:a}=L(),[v,u]=t.useState(!0),[i,N]=t.useState(null),[m,c]=t.useState(null),[f,x]=t.useState(!1),[o,g]=t.useState(""),w=async()=>{if(!o.trim()){a("Please enter your email address","error");return}x(!0);try{const s=await fetch("/api/auth/resend-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o.trim()})}),n=await s.json();s.ok?(a("Verification email sent! Please check your email.","success"),g("")):a(n.message||"Failed to send verification email","error")}catch{a("Network error occurred","error")}finally{x(!1)}};t.useEffect(()=>{if(!l){c("No verification token provided"),u(!1);return}(async()=>{try{const n=await fetch(`${j.BASE_URL}${j.AUTH}/verify-email/${l}`,{method:"GET",headers:{"Content-Type":"application/json"}}),y=await n.json();n.ok?N(y):c(y.message||"Verification failed")}catch{c("Network error occurred while verifying email")}finally{u(!1)}})()},[l]);const h=()=>{d(p.LOGIN)},b=()=>{d(p.HOME)};if(v)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"max-w-md w-full space-y-8 p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:r("verifyingEmail")}),e.jsx("p",{className:"text-gray-600",children:r("pleaseWait")})]})})});if(m)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"max-w-md w-full space-y-8 p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 rounded-full bg-red-100 flex items-center justify-center mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:r("verificationFailed")}),e.jsx("p",{className:"text-gray-600 mb-6",children:m}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Need a new verification email?"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"email",placeholder:"Enter your email address",value:o,onChange:s=>g(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}),e.jsx("button",{onClick:w,disabled:f||!o.trim(),className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:bg-gray-400",children:f?"Sending...":"Resend Verification Email"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:b,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:r("goToHome")}),e.jsx("button",{onClick:h,className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:r("goToLogin")})]})]})})});if(i){const s=i.verified||i.alreadyVerified;return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"max-w-md w-full space-y-8 p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`mx-auto h-12 w-12 rounded-full flex items-center justify-center mb-4 ${s?"bg-green-100":"bg-red-100"}`,children:s?e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:r(s?"emailVerified":"verificationFailed")}),e.jsx("p",{className:"text-gray-600 mb-6",children:i.message}),s&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-blue-700",children:i.alreadyVerified?r("alreadyVerifiedInfo"):r("welcomeEmailSent")})})]})}),e.jsxs("div",{className:"space-y-3",children:[s&&e.jsx("button",{onClick:h,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:r("goToLogin")}),e.jsx("button",{onClick:b,className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:r("goToHome")})]})]})})})}return null};export{T as default};
